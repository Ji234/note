# bash  内置/外置命令

当Linux登录时候系统发现你的passwd文件里面配置的是/bin/bash,就会给你分配一个bash shell,登录用户经过审核之后就会通过bash shell 加载进程,bash进程在加载进程的时候在加载它的各个配置文件(/etc/profile,~/.bashrc,/etc/profile.d/*),从而配置好bash的执行环境  

bash的内置命令和普通的命令都能在bash环境下面执行,并实现他们的功能。但是有很大的区别，最典型的区别就是ps等工具能够捕捉到普通命令的进程，而不能捕捉到内置命令的进程。在bash中的内置命令在运行时候不会创建子进程。  

内置命令由shell程序识别，并且在shell内部完成运行，通常在Linux加载运行时shell就被加载并驻留在内存中。内部命令是写在bashy源码里面的，其执行速度远比外部命令快，因为解析内部命令不需要创建子进程。  

bash内置命令和普通命令不一样。普通命令可以直接执行，不依赖某种执行环境。列如，sleep命令可以直接以pid=1的 inti/systemed为父进程而执行。那些daemon类的服务进程更是如此，他们不依赖于终端，也不依赖于执行环境，子要给他们配置好就可以直接找init/systemd当孙子。  

而bash内置命令，当我们输入并执行的时候，第一步是shell解析，发现这个是bash内置命令，于是直接在当前的bash进程内部调用执行它们。所有bash内置命令自身是没有进程的。  

bash内置命令无论是什么时候执行都必须先找bash为它们提供执行环境。如果是当前shell中放进后台，则这个爹是新生成的bash进程只负责一件事，就是负责这个后台，为他的孩子提供bash环境。如果是在脚本中方放进后台，则这个爹是脚本进程，由于脚本不是内置进程，他能直接负责这个后台（因为脚本进程也是bash进程的变体，也相当一一个新的bash进程）  

所以，可以得出一个结论在bash脚本中使用内置命令可以有更好的性能表现  

for num in {1..100} ;do echo 222; done #循环执行 echo 222
unhup #可以脱离terminal 继续执行程序，但是操作内容不能出现标准输入（标准输入不会被进行）

* 下面是bash内置命令

| 命令  | 含义  |
|---|---|
| .| 使shell读取指定的Shell程序文件并依次执行文件中的语句 |
| :| 空,永远返回空 |
| break| 退出循环 |
| bg| 把作业放到后台 |
| bind| 显示当前的套接字与函数的绑定关系 |
| cd| 切换目录 |
| continue| 执行循环的下一步  |
| dirs| 显示当前记录的目录 dirs 包含pushd 和popd 可以将目录结构形成栈的样式实现特殊的目录跳转 |
| echo| 反馈信息到标准输出 |
| enable| 启用或者禁用shell中的内置命令(有两个同名命令,把内置命令禁用就可以直接使用非内置命令而不必使用完整的路径名) |

```bash
wshg@17:09:05 ~ $ enable -n cd  
wshg@17:14:55 ~ $ cd  
bash: cd：未找到命令  
wshg@17:14:57 ~ $ enable cd  
wshg@17:15:07 ~ $ cd
```

| 命令  | 含义  |
|---|---|
| exec| 当Shell执行到exec语句时,不会创建新的子进程,而是转而去执行指定的命令,当指定的命令执行完时,该进程(也就是最初的Shell)就终止了,所以Shell程序中exec程序中exec后面的语句将不在执行 |
| exit| 退出Shell |
| export| Shell可以用export把它的变量向下带入子Shell,从而让子进程继承父进程中的环境变量。但是子Shell不能export把它的变量向上带入父进程 |
| env| 显示或者设置用户变量 |
| eval| 读取参数，执行结果变量（可把命令中的变量转换成变量的值） |
| help| 显示内置命令列，或者显示一个具体命令的用法 |
| history| 查看以往使用的所有命令 |
| kill| 由作业号和pid号给指定的进程发信号，kill -l 信号列表 |
| pwd| 当前目录 |
| printf| 格式显示字符串 -v 给变量赋值 |
| read| 从标准输入读取一行文本 |
| readonly| 将一个用户定义的Shell变量标识为不可变。 |
| return | 返回函数值 |
| set| 用于显或清除环境变量，set，env，exprot设置的环境变量都可以用unset来清除 |
| shift| 对于某个命令行参数，其参数个数可以不固定，但是可以通过$*或$@进行循环操作。若用户要求Shell在不知道变量个数的情况下，还能逐个处理参数，也就是在$1之后是$2，$2之后是$3。在未运行shift命令之前$1是可用的，当使用shift命令之后，原来的$2会变成$1，并且原有的$1变得不可用，通过$#命令获得的参数个数也会少1。 |
| times| 显示用户脚本或者任何系统命令运行的时间，第一行给出Shell消耗时间，第二行给出运行命令消耗的时间 |
| trap| 当前捕获信号时运行时bash发给进程的信息，ulimit 显示或者设置shell资源 |
| suspend| 终止当前shell的运行 |
| wait  | 使Shell等待在后台启动的所有子进程结束。wait的返回值总是真 |
| ulimit| 显示或者设置进程可用资源的最大限额 |
| unalias| 取消所有的命名别名设置 |